/*! xmrig-js v0.7.1 | https://github.com/xmrig/xmrig-js */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Xmrig={})}(this,(function(t){"use strict";class e extends Error{constructor(t){super(t),this.name="XmrigError"}}class r{constructor(t,e){this.hashesTotal=0,this.running=!1,this._threads=e.threads||4,this._url=e.url,this._user=e.user,this._onUpdate=e.onUpdate,this._onOpen=e.onOpen,this._onClose=e.onClose,this._onError=e.onError,this._socket=null,this._interval=null}start(){return new Promise((t,e)=>{try{this._socket=new WebSocket(this._url),this._socket.onopen=()=>{this.running=!0,this._onOpen&&this._onOpen(),this._interval=setInterval((()=>{this.hashesTotal+=this._threads*100,this._onUpdate&&this._onUpdate({hashesTotal:this.hashesTotal})}),1000),t()},this._socket.onerror=t=>{this.running=!1,this._onError&&this._onError(t),e(new e("WebSocket error"))},this._socket.onclose=()=>{this.running=!1,this._onClose&&this._onClose(),clearInterval(this._interval)}}catch(t){e(new e("Failed to start miner"))}})}stop(){this.running=!1,this._socket&&this._socket.close(),clearInterval(this._interval)}}t.Xmrig=r,Object.defineProperty(t,"__esModule",{value:!0})}));
